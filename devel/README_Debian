## 13.12.2015 Andreas Weber

This package was tested with GNU Octave 3.8.2 on a fresh VirtualBox with a
64bit install from debian-8.2.0-amd64-i386-netinst.iso

$ lsb_release -a
No LSB modules are available.
Distributor ID:	Debian
Description:	Debian GNU/Linux 8.2 (jessie)
Release:	8.2
Codename:	jessie

$ apt-get install liboctave-dev mercurial openssh-server sudo make autotools-dev autoconf automake pkg-config
$ hg clone http://hg.code.sf.net/p/octave/video octave-video

$ cd octave-video/src
$ ./bootstrap

create new VM snapshot.

### libav from official sources ###

libavcodec-dev | 6:11.4-1~deb8u1 | http://ftp.de.debian.org/debian/ jessie/main amd64 Packages
libswscale-dev | 6:11.4-1~deb8u1 | http://ftp.de.debian.org/debian/ jessie/main amd64 Packages
libavformat-dev | 6:11.4-1~deb8u1 | http://ftp.de.debian.org/debian/ jessie/main amd64 Packages
libavutil-dev | 6:11.4-1~deb8u1 | http://ftp.de.debian.org/debian/ jessie/main amd64 Packages

$ sudo apt-get install libavutil-dev libavformat-dev libswscale-dev libavcodec-dev
$ ./configure
$ cd ..
$ make check

  addframe.cc ............................................ PASS    2/2   
  avifile.cc ............................................. PASS    1/1   
  aviinfo.cc ............................................. PASS    1/1   
  aviread.cc .............................................AVHandler: Error reading packet after timestamp 0
  ***** xtest
 fn = tmpnam;
 x = avifile(fn);
 I = ones(256,256);
 addframe(x, I);
 clear x
 # FIXME: This fails if there is only 1 frame (fine with >1 frames) with
 # AVHandler: Error reading packet after timestamp 0
 I = aviread(fn, 1);
!!!!! known failure
aviread: cannot read frame 1
 PASS    2/2

revert to last snapshot

### libav from debian-multimedia ###

Adding unofficial packages from third-party repositories may cause problems:
https://wiki.debian.org/DebianMultimedia/FAQ#A_recent_upgrade_of_ffmpeg.2Flibav-related_library_packages_.28e.g._libavcodec.29_has_broken_related_software_.28e.g._Totem.2C_MPlayer.2C_VLC.2C_Xine.29

libavcodec-dev | 10:2.6.5-dmo1 | http://www.deb-multimedia.org/ jessie/main amd64 Packages
libswscale-dev | 10:2.6.5-dmo1 | http://www.deb-multimedia.org/ jessie/main amd64 Packages
libavformat-dev | 10:2.6.5-dmo1 | http://www.deb-multimedia.org/ jessie/main amd64 Packages
libavutil-dev | 10:2.6.5-dmo1 | http://www.deb-multimedia.org/ jessie/main amd64 Packages

$ cd octave-video/src
$ ./bootstrap
$ ./configure
$ cd ..
$ make check

One new warning: AVHandler.cc:367:37: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
   if ((uint64_t)vstream->start_time != AV_NOPTS_VALUE)

Processing files in /home/andy/src/octave-video/src:

  addframe.cc ............................................ PASS    2/2   
  avifile.cc ............................................. PASS    1/1   
  aviinfo.cc ............................................. PASS    1/1   
  aviread.cc .............................................AVHandler: Error reading packet after timestamp 0
  ***** xtest
 fn = tmpnam;
 x = avifile(fn);
 I = ones(256,256);
 addframe(x, I);
 clear x
 # FIXME: This fails if there is only 1 frame (fine with >1 frames) with
 # AVHandler: Error reading packet after timestamp 0
 I = aviread(fn, 1);
!!!!! known failure
aviread: cannot read frame 1
 PASS    2/2 
