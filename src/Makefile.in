OCTFILES = avifile.oct aviread.oct aviinfo.oct addframe.oct
AVOBJS = AVHandler.o oct-avifile.o
FILES_WITH_TESTS = avifile.cc addframe.cc

MKOCTFILE ?= mkoctfile

.PHONY: clean
.PHONY: realclean
.PHONY: distclean

all: ${OCTFILES}

oct-avifile.o: AVHandler.o

${AVOBJS}: %.o: %.cc
	$(MKOCTFILE) -Wall -v -c @DEFS@ $< -o $@ @CPPFLAGS@

${OCTFILES}: %.oct: %.cc AVHandler.o oct-avifile.o
	$(MKOCTFILE) -Wall -v @DEFS@ $< $(filter %.o, $^) @LIBS@ @CPPFLAGS@

clean:
	rm -f *.o *~ *.orig octave-workspace

realclean: clean
	rm -f *.oct avctest
	
distclean: realclean
	rm -rf autom4te.cache
	rm -f Makefile config.status config.log config.h configure
	rm -f *.avi
