OCTFILES = avifile.oct aviread.oct aviinfo.oct addframe.oct
AVOBJS = AVHandler.o oct-avifile.o
FILES_WITH_TESTS = avifile.cc addframe.cc

.PHONY: clean
.PHONY: realclean
.PHONY: distclean

all: ${OCTFILES}

oct-avifile.o: AVHandler.o

${AVOBJS}: %.o: %.cc
	mkoctfile -Wall -v -c @DEFS@ $< -o $@

${OCTFILES}: %.oct: %.cc AVHandler.o oct-avifile.o
	mkoctfile -Wall -v @DEFS@ $< $(filter %.o, $^) @LIBS@

clean:
	rm -f *.o *~ *.orig octave-workspace

realclean: clean
	rm -f *.oct avctest
	
distclean: realclean
	rm -rf autom4te.cache
	rm -f Makefile config.status config.log config.h configure
	rm -f *.avi
